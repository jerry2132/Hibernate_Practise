package com.hibernate.OneToMany3pm.dao;

import java.util.Set;

import javax.persistence.EntityManager;
import javax.persistence.EntityTransaction;
import javax.persistence.Persistence;

import com.hibernate.OneToMany3pm.dto.District;
import com.hibernate.OneToMany3pm.dto.State;

public class StateDistrictDao {

	
	EntityManager em = Persistence.createEntityManagerFactory("sumit").createEntityManager();
	EntityTransaction et = em.getTransaction();
	
	
	public State insertStateAndDistrict(State state) {
		
		et.begin();
		em.persist(state);
		et.commit();
		
		return state;
		
	}
	
	
	public boolean deleteDistrictByStateId(int id) {
		
		State state = em.find(State.class, id);
		
		
		Set<District> dist = state.getDistrict();
		
		for(District district : dist) {
			
			if(district.getId() == 1) {
				et.begin();
				
				em.remove(district);
				et.commit();
				return true;
			}
		}
		
		return false;
		
	}
	
	public boolean deleteDistrictById() {
		return true;
	}
	
	public State getAll(int id) {
		
		return em.find(State.class, id);
	}
}
